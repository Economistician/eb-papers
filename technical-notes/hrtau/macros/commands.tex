% ----------------------------------------------------------
% METRIC & FRAMEWORK MACROS
% Forecast Readiness Framework / Electric Barometer
% ----------------------------------------------------------

% Core metric(s)
\newcommand{\CWSL}{\ensuremath{\mathrm{CWSL}}}
\newcommand{\HR}{\ensuremath{\mathrm{HR}}}
\newcommand{\HRtau}{\ensuremath{\mathrm{HR@}\tau}}

% ----------------------------------------------------------
% Indexing
% ----------------------------------------------------------

\newcommand{\entity}{\ensuremath{i}}
\newcommand{\timeindex}{\ensuremath{t}}

\newcommand{\yit}{\ensuremath{y_{\entity\timeindex}}}
\newcommand{\yhatit}{\ensuremath{\hat{y}_{\entity\timeindex}}}

% ----------------------------------------------------------
% Errors and tolerance
% ----------------------------------------------------------

% Residual and absolute error
\newcommand{\resit}{\ensuremath{e_{\entity\timeindex}}}
\newcommand{\abserrit}{\ensuremath{\left|e_{\entity\timeindex}\right|}}

% Explicit residual definition
\newcommand{\resdef}{\ensuremath{\resit = \yit - \yhatit}}

% Tolerance (scalar / entity-specific)
\newcommand{\tauv}{\ensuremath{\tau}}
\newcommand{\taui}{\ensuremath{\tau_{\entity}}}

% Explicit tolerance definition (absolute band)
\newcommand{\taudef}{\ensuremath{\tauv \ge 0}}

% ----------------------------------------------------------
% Indicator / hit definition
% ----------------------------------------------------------

\newcommand{\Indicator}{\ensuremath{\mathbb{I}}}
\newcommand{\Hitit}{\ensuremath{h_{\entity\timeindex}}}

% Hit event: within tolerance band
\newcommand{\HitDef}{\ensuremath{\Hitit = \Indicator\!\left(\abserrit \le \tauv\right)}}

% ----------------------------------------------------------
% Aggregation
% ----------------------------------------------------------

\newcommand{\sumit}{\ensuremath{\sum_{\entity \in I} \sum_{\timeindex \in T}}}
\newcommand{\nobs}{\ensuremath{N}}

% ----------------------------------------------------------
% HR@tau as a function of tau
% ----------------------------------------------------------

\newcommand{\HRoftau}{\ensuremath{\HR(\tauv)}}
\newcommand{\HRtauoftau}{\ensuremath{\HRtau(\tauv)}}

% Candidate tolerance grid
\newcommand{\TauGrid}{\ensuremath{\mathcal{T}}}

% ----------------------------------------------------------
% Calibrated / selected tolerance
% ----------------------------------------------------------

\newcommand{\taustar}{\ensuremath{\tau^{\ast}}}
\newcommand{\taustari}{\ensuremath{\tau^{\ast}_{\entity}}}

% Target hit-rate (readiness standard)
\newcommand{\hstar}{\ensuremath{h^{\ast}}}

% Quantile operator (for target-hit-rate selection)
\newcommand{\Quantile}{\ensuremath{Q}}

% Quantile-based calibration rule (informal macro)
\newcommand{\TauTargetRule}{\ensuremath{\taustar = \Quantile(\left|e\right|,\hstar)}}

% ----------------------------------------------------------
% Knee / utility selection (governed choices)
% ----------------------------------------------------------

% Utility weight (penalty on tolerance width)
\newcommand{\lambdau}{\ensuremath{\lambda}}

% Maximum tolerance for normalization
\newcommand{\taumax}{\ensuremath{\tau_{\max}}}

% Simple utility form
\newcommand{\Utility}{\ensuremath{\mathcal{U}}}
\newcommand{\UtilityDef}{\ensuremath{\Utility(\tauv) = \HR(\tauv) - \lambdau \cdot (\tauv / \taumax)}}

% ----------------------------------------------------------
% Governance guards
% ----------------------------------------------------------

\newcommand{\taufloor}{\ensuremath{\tau_{\min}}}
\newcommand{\taucap}{\ensuremath{\tau_{\mathrm{cap}}}}
\newcommand{\nmin}{\ensuremath{n_{\min}}}

% ----------------------------------------------------------
% Diagnostics & governance
% ----------------------------------------------------------

\newcommand{\Sensitivity}{\ensuremath{\mathrm{Sensitivity}}}
\newcommand{\Stability}{\ensuremath{\mathrm{Stability}}}

% ----------------------------------------------------------
% Readiness framework language
% ----------------------------------------------------------

\newcommand{\ReadinessPrimitive}{\ensuremath{\mathcal{P}}}